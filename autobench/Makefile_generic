INCDIR			= $(HOME)/.local/include

CPP_COMPILER	= g++ -std=c++11
CPP_FLAGS		= -O3 -march=native -Wall -Wextra -fPIC
CPP_INCLUDES	= -I$(HOME)/.local/include -I../../../include
CPP_LIBS		= -llagraph -lgraphblas -lm -Wl,-rpath,$(HOME)/.local/lib -L$(HOME)/.local/lib

OBJECT          = $(notdir $(patsubst %/,%,$(dir $(abspath $(lastword $(MAKEFILE_LIST)))))).o


all: bench

%.o: %.cpp
	$(CPP_COMPILER) $(CPP_FLAGS) -c $(CPP_INCLUDES) $< -o $@

bench: bench.cpp $(OBJECT)
	$(CPP_COMPILER) $(CPP_FLAGS) $(CPP_INCLUDES) $(CPP_LIBS) $^ -o $@

clean:
	rm -f *.o

.PHONY: all clean
